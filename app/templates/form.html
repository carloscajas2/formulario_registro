<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro de Personal por Agencia - Banco de Crédito</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f4f7f6;
            font-family: 'Arial', sans-serif;
        }
        .container {
            margin-top: 30px;
            max-width: 1400px;
        }
        .header {
            background-color: #215C98;
            color: white;
            padding: 15px 0;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .header h2 {
            margin: 0;
            font-size: 2.5rem;
        }
        .form-section-title {
            font-size: 1.75rem;
            color: #215C98;
            margin-top: 40px;
            margin-bottom: 20px;
            font-weight: bold;
            text-transform: uppercase;
            text-align: center;
        }
        .card-title {
            font-size: 1.25rem;
            color: #215C98;
            font-weight: bold;
        }
        .btn-primary {
            background-color: #215C98;
            border-color: #215C98;
            transition: background-color 0.3s, border-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #1b4a7d;
            border-color: #1b4a7d;
        }
        .card {
            border: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-body {
            padding: 20px;
        }
        .form-label {
            font-weight: bold;
        }
        .footer {
            margin-top: 40px;
            text-align: center;
            font-size: 0.9rem;
            color: #777;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>Registro de Personal por Agencia</h2>
            <p class="mb-0">Banco de Crédito</p>
        </div>
        <p class="text-center mb-4">Datos actualizados al: {{ last_update }}</p>
        {% if messages %}
            <div class="alert alert-success text-center" role="alert">
                {% for message in messages %}
                    {{ message }}<br>
                {% endfor %}
            </div>
        {% endif %}
        <form action="" method="post">
            {% csrf_token %}
            <div class="form-section-title">Ventanilla</div>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                {% for data in agencias_datos %}
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ data.agencia.nom_age }}</h5>
                            <div class="mb-3">
                                <label for="contratados_vent_{{ data.agencia.id_age }}" class="form-label">Contratados:</label>
                                <input type="number" class="form-control" id="contratados_vent_{{ data.agencia.id_age }}" name="contratados_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Contratados }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="conectados_vent_{{ data.agencia.id_age }}" class="form-label">Conectados:</label>
                                <input type="number" class="form-control" id="conectados_vent_{{ data.agencia.id_age }}" name="conectados_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Conectados }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="nuevos_vent_{{ data.agencia.id_age }}" class="form-label">Nuevos:</label>
                                <input type="number" class="form-control" id="nuevos_vent_{{ data.agencia.id_age }}" name="nuevos_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Nuevos }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="bajas_medicas_vent_{{ data.agencia.id_age }}" class="form-label">Bajas Medicas:</label>
                                <input type="number" class="form-control" id="bajas_medicas_vent_{{ data.agencia.id_age }}" name="bajas_medicas_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Bajas_Medicas }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="remplazo_plataforma_rac_vent_{{ data.agencia.id_age }}" class="form-label">Remplazo Plataforma/RAC:</label>
                                <input type="number" class="form-control" id="remplazo_plataforma_rac_vent_{{ data.agencia.id_age }}" name="remplazo_plataforma_rac_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Remplazo_Plataforma_RAC }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="externas_y_autobancos_vent_{{ data.agencia.id_age }}" class="form-label">Externas y Autobancos:</label>
                                <input type="number" class="form-control" id="externas_y_autobancos_vent_{{ data.agencia.id_age }}" name="externas_y_autobancos_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Externas_y_Autobancos }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="promotor_offline_vent_{{ data.agencia.id_age }}" class="form-label">Promotor Offline:</label>
                                <input type="number" class="form-control" id="promotor_offline_vent_{{ data.agencia.id_age }}" name="promotor_offline_vent_{{ data.agencia.id_age }}" value="{{ data.ventanilla.Promotor_Offline }}" required>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="form-section-title">Plataforma</div>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
                {% for data in agencias_datos %}
                <div class="col">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">{{ data.agencia.nom_age }}</h5>
                            <div class="mb-3">
                                <label for="contratados_plat_{{ data.agencia.id_age }}" class="form-label">Contratados:</label>
                                <input type="number" class="form-control" id="contratados_plat_{{ data.agencia.id_age }}" name="contratados_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Contratados }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="conectados_plat_{{ data.agencia.id_age }}" class="form-label">Conectados:</label>
                                <input type="number" class="form-control" id="conectados_plat_{{ data.agencia.id_age }}" name="conectados_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Conectados }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="nuevos_plat_{{ data.agencia.id_age }}" class="form-label">Nuevos:</label>
                                <input type="number" class="form-control" id="nuevos_plat_{{ data.agencia.id_age }}" name="nuevos_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Nuevos }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="bajas_medicas_plat_{{ data.agencia.id_age }}" class="form-label">Bajas Medicas:</label>
                                <input type="number" class="form-control" id="bajas_medicas_plat_{{ data.agencia.id_age }}" name="bajas_medicas_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Bajas_Medicas }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="remplazo_plataforma_rac_plat_{{ data.agencia.id_age }}" class="form-label">Remplazo Plataforma/RAC:</label>
                                <input type="number" class="form-control" id="remplazo_plataforma_rac_plat_{{ data.agencia.id_age }}" name="remplazo_plataforma_rac_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Remplazo_Plataforma_RAC }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="externas_y_autobancos_plat_{{ data.agencia.id_age }}" class="form-label">Externas y Autobancos:</label>
                                <input type="number" class="form-control" id="externas_y_autobancos_plat_{{ data.agencia.id_age }}" name="externas_y_autobancos_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Externas_y_Autobancos }}" required>
                            </div>
                            <div class="mb-3">
                                <label for="promotor_offline_plat_{{ data.agencia.id_age }}" class="form-label">Promotor Offline:</label>
                                <input type="number" class="form-control" id="promotor_offline_plat_{{ data.agencia.id_age }}" name="promotor_offline_plat_{{ data.agencia.id_age }}" value="{{ data.plataforma.Promotor_Offline }}" required>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            <div class="text-center mt-4">
                <button type="submit" name="action" value="submit" class="btn btn-primary btn-lg">Enviar</button>
                <a href="{% url 'download_csv' %}" class="btn btn-secondary btn-lg">Descargar CSV</a>
            </div>
        </form>
        <div class="footer">
            <p>&copy; 2024 Banco de Crédito. Todos los derechos reservados.</p>
        </div>
    </div>
</body>
</html>
